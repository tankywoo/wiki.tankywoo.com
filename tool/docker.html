<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
        <title>Docker - Wiki · Tanky Woo</title>
        <meta name="keywords" content="wiki, makrdown, linux, python, cpp, ops, simiki"/>
        <meta name="description" content="Tanky Woo's personal wiki, powered by vim and markdown. Focus on Python, C/C++, Linux, Ops-Dev, Gentoo, and so on."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        

    </head>

    <body>
        <div id="container" class="typo">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Wiki · Tanky Woo</a> » <a href="/#tool">tool</a> » Docker
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="content">
        <p><a href="https://www.docker.com/">Docker</a> Build, Ship, Run; An open platform for distributed applications for developers and sysadmins</p>
<h2 id="_1">前言</h2>
<p>下面5个链接是2014年的博客, 基于0.10.0, 当前是1.9.x (有些已经失效)</p>
<ul>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-1-start.html">Docker 1 -- 开始</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-2-dockerfile.html">Docker 2 -- 关于Dockerfile</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-3-docker-registry.html">Docker 3 -- 自建Docker Registry</a></li>
<li><a href="http://blog.tankywoo.com/docker/2014/05/08/docker-4-summary.html">Docker 4 -- 总结</a></li>
<li><a href="http://blog.tankywoo.com/2014/12/22/docker-bridge-network.html">Docker 网络桥接</a></li>
</ul>
<p>入门参考:</p>
<ul>
<li><a href="http://docs.docker.com/linux/started/">Docker - Get Started</a></li>
<li><a href="https://docs.docker.com/">Docker - Docs</a></li>
</ul>
<p>其实以前入门时, 有一个Interactive commandline tutorial, 我觉得挺好的, 但是现在没了.</p>
<p>那个时候docker官网的域名还是docker.io, 现在已经把docker.com拿下了, 变化还是挺大的.</p>
<h2 id="_2">遇到的问题</h2>
<h2 id="loop-module">loop module</h2>
<p>Gentoo下安装docker后启动报错, 看日志:</p>
<blockquote>
<p>level=info msg="Listening for HTTP on unix (/var/run/docker.sock)"
level=error msg="There are no more loopback devices available."
level=fatal msg="Error starting daemon: error initializing graphdriver: loopback mounting failed"</p>
</blockquote>
<p>原因是没有加载<code>loop</code>模块. 在<code>/etc/conf.d/modules</code> 中加入模块:</p>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">conf</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">modules</span>
<span class="cp"># You can define a list modules for a specific kernel version,</span>
<span class="cp"># a released kernel version, a main kernel version or just a list.</span>
<span class="cp"># The most specific versioned variable will take precedence.</span>
<span class="cp">#modules_2_6_23_gentoo_r5=&quot;ieee1394 ohci1394&quot;</span>
<span class="cp">#modules_2_6_23=&quot;tun ieee1394&quot;</span>
<span class="cp">#modules_2_6=&quot;tun&quot;</span>
<span class="cp">#modules_2=&quot;ipv6&quot;</span>
<span class="cp">#modules=&quot;ohci1394&quot;</span>

<span class="cp"># You can give modules a different name when they load - the new name</span>
<span class="cp"># will also be used to pick arguments below.</span>
<span class="cp">#modules=&quot;dummy:dummy1&quot;</span>

<span class="cp"># Give the modules some arguments if needed, per version if necessary.</span>
<span class="cp"># Again, the most specific versioned variable will take precedence.</span>
<span class="cp">#module_ieee1394_args=&quot;debug&quot;</span>
<span class="cp">#module_ieee1394_args_2_6_23_gentoo_r5=&quot;debug2&quot;</span>
<span class="cp">#module_ieee1394_args_2_6_23=&quot;debug3&quot;</span>
<span class="cp">#module_ieee1394_args_2_6=&quot;debug4&quot;</span>
<span class="cp">#module_ieee1394_args_2=&quot;debug5&quot;</span>

<span class="cp"># You should consult your kernel documentation and configuration</span>
<span class="cp"># for a list of modules and their options.</span>
<span class="n">modules</span><span class="o">=</span><span class="s">&quot;loop&quot;</span>
</pre></div>


<p>然后加载模块: <code>modprobe loop</code></p>
    </div>

        </div>
        <div id="footer">
              <p>
                Copyright © 2012-2016 Tanky Woo.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
                Theme by <a href="https://github.com/tankywoo/yasimple" target="_blank">YASimple</a>.
              </p>
              <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p>
              <p>Last Update 2016-02-15 13:30:02</p>
              <p><a href="https://github.com/tankywoo/wiki.tankywoo.com">Fork me on Github</a></p>
        </div>
<script type="text/javascript">
	var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F754de327571c0ba7ff50a61fc964e196' type='text/javascript'%3E%3C/script%3E"));
</script>
    </body>
</html>